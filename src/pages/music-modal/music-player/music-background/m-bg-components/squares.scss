@use '../music-animations/music-animation';

$beat-fallbacks: (
    1: #ff6b6b,
    2: #f7b801,
    3: #2ec4b6,
    4: #6c63ff
);

.outer-square {
    position: absolute;
    top: 50%;
    left: 50%;
    width: calc(var(--grid-cell, 20px) * var(--grid-cols, 3));
    height: calc(var(--grid-cell, 20px) * var(--grid-rows, 3));
    pointer-events: none;
    --pixel-min-size: 10px;
    transform: translate(-50%, -50%);
}

.outer-square--ghost {
    display: none;
}

.square {
    aspect-ratio: 1 / 1;
}

.mid-square {
    position: absolute;
    width: var(--grid-cell, 20px);
    height: var(--grid-cell, 20px);
    top: calc(var(--cell-y, 0) * var(--grid-cell, 20px));
    left: calc(var(--cell-x, 0) * var(--grid-cell, 20px));
    opacity: 1;
}

.inner-square {
    position: absolute;
    width: min(50%, var(--pixel-min-size));
    height: min(50%, var(--pixel-min-size));
    min-width: 0;
    min-height: 0;
    display: none;
    opacity: 0;
    top: calc(25% + (var(--inner-y, 0) * 50%));
    left: calc(25% + (var(--inner-x, 0) * 50%));
    transform: translate(-50%, -50%) rotate(var(--pixel-rot, 0deg)) scale(var(--pixel-hover-scale, 1));
    transform-origin: center;
    transition: none;
}

.inner-square.pixel {
    display: block;
    opacity: 1 !important;
}

.mid-square[data-music-player-program-mid] {
    animation: none !important;
    opacity: 1 !important;
}

.inner-square[data-music-player-program] {
    display: block;
    animation: none !important;
    opacity: 1 !important;
}
